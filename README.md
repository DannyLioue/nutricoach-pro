# NutriCoach Pro - è¥å…»å¸ˆæ™ºèƒ½åˆ†æå¹³å°

> ä¸“ä¸ºæ³¨å†Œè¥å…»å¸ˆ (RD) æ‰“é€ çš„ AI é©±åŠ¨å¥åº·ç®¡ç†å¹³å°ï¼ŒåŸºäºåŒ»å­¦è¥å…»æ²»ç–— (MNT) æ ‡å‡†æä¾›ä¸“ä¸šè¥å…»å¹²é¢„æœåŠ¡

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Next.js](https://img.shields.io/badge/Next.js-16.1.1-black)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)

---

## åŠŸèƒ½ç‰¹æ€§

### å®¢æˆ·ç®¡ç†
- å®Œæ•´çš„å®¢æˆ·æ¡£æ¡ˆç®¡ç†ï¼ˆåŸºæœ¬ä¿¡æ¯ã€å¥åº·é—®é¢˜ã€è¿‡æ•å²ã€ç–¾ç—…å²ï¼‰
- å®¢æˆ·åˆ—è¡¨ä¸æœç´¢åŠŸèƒ½
- å’¨è¯¢è®°å½•ç®¡ç†
- é¥®é£Ÿè®°å½•è¿½è¸ª

### ä½“æ£€æŠ¥å‘Šåˆ†æ
- æ”¯æŒ PDFã€å›¾ç‰‡ (JPG/PNG/HEIC) æ ¼å¼
- AI è‡ªåŠ¨è¯†åˆ«ä½“æ£€æŒ‡æ ‡ï¼ˆè¡€å¸¸è§„ã€è¡€ç”ŸåŒ–ã€æ¿€ç´ æ°´å¹³ç­‰ï¼‰
- åŸºäºå¾ªè¯åŒ»å­¦çš„å¥åº·é£é™©è¯„ä¼°
- äººä½“æˆåˆ†åˆ†æï¼ˆBMIã€BMRã€TDEEï¼‰
- å¼‚å¸¸æŒ‡æ ‡è§£è¯»ä¸å¹²é¢„å»ºè®®

### è¥å…»å¹²é¢„æ–¹æ¡ˆ
- **ä¸ªæ€§åŒ–é¥®é£Ÿå»ºè®®**
  - åŸºäºä½“æ£€ç»“æœå®šåˆ¶çš„å®é‡è¥å…»ç´ ç›®æ ‡
  - çº¢ç»¿ç¯é£Ÿç‰©åˆ†ç±»ç³»ç»Ÿ
  - ä¸€æ—¥è†³é£Ÿè®¡åˆ’
  - è¥å…»ç´ è¡¥å……å»ºè®®

- **è¿åŠ¨å¤„æ–¹**
  - æœ‰æ°§è¿åŠ¨æ–¹æ¡ˆï¼ˆå«å¿ƒç‡åŒºé—´è®¡ç®—ï¼‰
  - åŠ›é‡è®­ç»ƒè®¡åˆ’
  - æŸ”éŸ§æ€§è®­ç»ƒå»ºè®®
  - é…å¥—è¿åŠ¨è§†é¢‘æ¨è

- **ç”Ÿæ´»æ–¹å¼å¹²é¢„**
  - ç¡çœ ç®¡ç†
  - é¥®æ°´å»ºè®®
  - å‹åŠ›ç®¡ç†ç­–ç•¥

### é¥®é£Ÿç…§ç‰‡åˆ†æ
- æ‹ç…§è®°å½•é¥®é£Ÿï¼ŒAI è‡ªåŠ¨è¯†åˆ«é£Ÿç‰©
- åˆè§„æ€§è¯„ä¼°ï¼ˆå¯¹æ¯”è¥å…»å¹²é¢„æ–¹æ¡ˆï¼‰
- è¥å…»æˆåˆ†åˆ†æ
- æ”¹è¿›å»ºè®®ç”Ÿæˆ
- **æ”¯æŒæ–‡å­—æè¿°** - æ— éœ€æ‹ç…§ï¼Œå¯ç›´æ¥æ–‡å­—æè¿°

### å‘¨é¥®é£Ÿæ±‡æ€»
- æ¯å‘¨é¥®é£Ÿåˆè§„æ€§æ€»ç»“
- è¯¦ç»†çš„è¥å…»æ‘„å…¥åˆ†æ
- é£Ÿç‰©æ‘„å…¥è¶‹åŠ¿è¿½è¸ª
- é—®é¢˜é¤æ¬¡è¯†åˆ«
- SMART ç›®æ ‡è®¾å®š

### æŠ¥å‘Šå¯¼å‡º
- ç”Ÿæˆä¸“ä¸š PDF æŠ¥å‘Š
- æ”¯æŒä¸­æ–‡å†…å®¹
- ç§»åŠ¨ç«¯ä¼˜åŒ–æ ¼å¼
- ä¸€é”®åˆ†äº«ç»™å®¢æˆ·

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Next.js** | 16.1.1 | å…¨æ ˆæ¡†æ¶ (App Router + Turbopack) |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ |
| **Tailwind CSS** | 3.x | æ ·å¼æ¡†æ¶ |
| **shadcn/ui** | Latest | UI ç»„ä»¶åº“ |
| **Recharts** | 2.x | æ•°æ®å¯è§†åŒ– |
| **React Hook Form** | 7.x | è¡¨å•ç®¡ç† |

### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Next.js API Routes** | 16.1.1 | æœåŠ¡ç«¯ API |
| **Prisma ORM** | 6.19.1 | æ•°æ®åº“ ORM |
| **PostgreSQL/SQLite** | - | æ•°æ®åº“ |

### AI & OCR
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Google Gemini** | 2.5 Pro | ä¸» AI æ¨¡å‹ï¼ˆå¤šæ¨¡æ€ï¼‰ |
| **Google Gemini** | 2.5 Flash | å¿«é€Ÿè§†è§‰åˆ†æ |
| **Vercel AI SDK** | 4.x | AI é›†æˆæ¡†æ¶ |

### è®¤è¯
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **NextAuth.js** | èº«ä»½è®¤è¯ |

---

## é¡¹ç›®ç»“æ„

```
nutricoach-pro/
â”œâ”€â”€ app/                              # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/                      # è®¤è¯é¡µé¢
â”‚   â”œâ”€â”€ (dashboard)/                 # ä¸»åº”ç”¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ clients/                 # å®¢æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/                # å®¢æˆ·è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ consultations/   # å’¨è¯¢è®°å½•
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ meal-groups/     # é£Ÿè°±ç»„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ diet-photos/     # é¥®é£Ÿç…§ç‰‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ weekly-diet-summary/ # å‘¨é¥®é£Ÿæ±‡æ€»
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ recommendations/ # è¥å…»å»ºè®®
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx            # å®¢æˆ·åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ analysis/                # ä½“æ£€æŠ¥å‘Šåˆ†æ
â”‚   â”‚   â””â”€â”€ dashboard/               # ä»ªè¡¨ç›˜
â”‚   â””â”€â”€ api/                         # API Routes
â”‚       â”œâ”€â”€ clients/                 # å®¢æˆ·ç›¸å…³ API
â”‚       â”œâ”€â”€ recommendations/         # å»ºè®®ç”Ÿæˆ API
â”‚       â””â”€â”€ reports/                 # æŠ¥å‘Šä¸Šä¼  API
â”œâ”€â”€ components/                      # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                          # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ analysis/                    # åˆ†æç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ consultation/                # å’¨è¯¢è®°å½•ç»„ä»¶
â”‚   â”œâ”€â”€ diet-records/                # é¥®é£Ÿè®°å½•ç»„ä»¶
â”‚   â”œâ”€â”€ recommendations/             # å»ºè®®å±•ç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ weekly-diet-summary/         # å‘¨æ±‡æ€»ç»„ä»¶
â”‚   â”œâ”€â”€ pdf/                         # PDF ç”Ÿæˆç»„ä»¶
â”‚   â””â”€â”€ layout/                      # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ lib/                             # å·¥å…·åº“
â”‚   â”œâ”€â”€ ai/                          # AI æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ gemini.ts               # Gemini API é›†æˆ
â”‚   â”‚   â””â”€â”€ prompts.ts              # AI æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ pdf/                         # PDF ç”Ÿæˆ
â”‚   â”œâ”€â”€ auth/                        # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ storage/                     # æ–‡ä»¶å­˜å‚¨
â”‚   â””â”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                           # TypeScript ç±»å‹
â”œâ”€â”€ prisma/                          # æ•°æ®åº“æ¨¡å‹
â”‚   â””â”€â”€ schema.prisma
â””â”€â”€ docs/                            # é¡¹ç›®æ–‡æ¡£
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“
DATABASE_URL="file:./dev.db"

# NextAuth
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"

# Gemini AI
GEMINI_API_KEY="your-gemini-api-key"
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
npx prisma generate
npx prisma db push
```

### 4. è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000)

---

## å¼€å‘è®¡åˆ’

### å·²å®Œæˆ âœ…

- [x] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [x] å®¢æˆ·ç®¡ç†åŠŸèƒ½
- [x] ä½“æ£€æŠ¥å‘Šä¸Šä¼ ä¸åˆ†æ
- [x] AI è¥å…»å»ºè®®ç”Ÿæˆ
- [x] é¥®é£Ÿç…§ç‰‡åˆ†æï¼ˆæ”¯æŒç…§ç‰‡å’Œæ–‡å­—æè¿°ï¼‰
- [x] å‘¨é¥®é£Ÿæ±‡æ€»
- [x] å’¨è¯¢è®°å½•ç®¡ç†
- [x] PDF æŠ¥å‘Šå¯¼å‡º
- [x] ç§»åŠ¨ç«¯ä¼˜åŒ–

### è¿›è¡Œä¸­ ğŸš§

- [ ] æ•°æ®å¯è§†åŒ–å¢å¼º
- [ ] æ›´å¤šè¿åŠ¨è§†é¢‘é›†æˆ
- [ ] å®¢æˆ·ç«¯æŸ¥çœ‹åŠŸèƒ½

### è®¡åˆ’ä¸­ ğŸ“‹

- [ ] ç§»åŠ¨ç«¯ App
- [ ] è¥å…»å¸ˆç¤¾åŒºåŠŸèƒ½
- [ ] åœ¨çº¿æ”¯ä»˜é›†æˆ
- [ ] æ•°æ®å¤‡ä»½ä¸åŒæ­¥

---

## æ•°æ®åº“æ¨¡å‹

ä¸»è¦æ•°æ®æ¨¡å‹ï¼š

```prisma
model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  clients       Client[]
}

model Client {
  id               String   @id @default(cuid())
  userId           String
  name             String
  gender           Gender
  birthDate        DateTime
  height           Float
  weight           Float
  activityLevel    ActivityLevel
  allergies        String[]
  medicalHistory   String[]
  preferences      String?
  healthConcerns   String?
  userRequirements String?

  reports          Report[]
  recommendations  Recommendation[]
  consultations    Consultation[]
  dietPhotos       DietPhoto[]
  mealGroups       DietPhotoMealGroup[]
  weeklySummaries  WeeklyDietSummary[]
}

model Report {
  id              String   @id @default(cuid())
  clientId        String
  fileUrl         String
  fileName        String
  fileType        String
  extractedData   Json
  analysis        Json?
  uploadedAt      DateTime @default(now())
}

model Recommendation {
  id              String   @id @default(cuid())
  clientId        String
  type            RecType
  content         Json
  generatedAt     DateTime @default(now())
}

model DietPhoto {
  id              String   @id @default(cuid())
  clientId        String
  mealGroupId     String?
  imageUrl        String
  analysis        String?
  analyzedAt      DateTime?
  uploadedAt      DateTime @default(now())
}

model DietPhotoMealGroup {
  id                String   @id @default(cuid())
  clientId          String
  name              String
  date              String
  mealType          String?
  textDescription   String?
  combinedAnalysis  String?
  totalScore        Int?
  overallRating     String?
  photos            DietPhoto[]
}

model Consultation {
  id              String   @id @default(cuid())
  clientId        String
  date            DateTime
  notes           String
  audioFileUrl    String?
  imageFiles      Json?
  analysis        Json?
}

model WeeklyDietSummary {
  id              String   @id @default(cuid())
  clientId        String
  weekStartDate   String
  weekEndDate     String
  summary         String
  generatedAt     DateTime @default(now())
}
```

---

## AI æç¤ºè¯å·¥ç¨‹

é¡¹ç›®ä½¿ç”¨ä¸“ä¸šçš„æ³¨å†Œè¥å…»å¸ˆ (RD) æ ‡å‡†æç¤ºè¯ï¼Œéµå¾ªï¼š

- **å¾ªè¯åŒ»å­¦ (Evidence-Based Medicine)**: æ‰€æœ‰å»ºè®®åŸºäºä¸´åºŠç ”ç©¶è¯æ®
- **åŒ»å­¦è¥å…»æ²»ç–— (MNT)**: æä¾›å¯é‡åŒ–ã€å¯æ‰§è¡Œçš„å¹²é¢„æ–¹æ¡ˆ
- **æ•°æ®å®Œæ•´æ€§**: ç¼ºå¤±æ•°æ®å¿…é¡»æ ‡è®°
- **è®¡ç®—é€æ˜åŒ–**: æ‰€æœ‰æ•°å€¼è®¡ç®—å±•ç¤ºå…¬å¼

è¯¦è§ `lib/ai/prompts.ts`

---

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åˆ‡æ¢æ•°æ®åº“ï¼Ÿ

ä¿®æ”¹ `.env.local` ä¸­çš„ `DATABASE_URL`ï¼š

```bash
# SQLite (å¼€å‘ç¯å¢ƒ)
DATABASE_URL="file:./dev.db"

# PostgreSQL (ç”Ÿäº§ç¯å¢ƒ)
DATABASE_URL="postgresql://user:password@host:port/database"
```

### Q: å¦‚ä½•é…ç½® Gemini APIï¼Ÿ

1. è®¿é—® [Google AI Studio](https://aistudio.google.com/)
2. åˆ›å»º API Key
3. æ·»åŠ åˆ° `.env.local` çš„ `GEMINI_API_KEY`

### Q: PDF å¯¼å‡ºä¸­æ–‡æ˜¾ç¤ºé—®é¢˜ï¼Ÿ

é¡¹ç›®ä½¿ç”¨æ€æºé»‘ä½“ (Noto Sans SC) ç¡®ä¿ä¸­æ–‡æ­£ç¡®æ˜¾ç¤ºã€‚å­—ä½“æ–‡ä»¶ä½äº `public/fonts/`ã€‚

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## License

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [Issues]

---

**NutriCoach Pro** - è®©ä¸“ä¸šè¥å…»æœåŠ¡æ›´é«˜æ•ˆ ğŸ¥—ğŸ’ª
